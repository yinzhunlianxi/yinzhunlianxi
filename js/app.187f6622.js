(function(){"use strict";var t={6568:function(t,e,n){var o=n(7764),i=n(4108);function l(t,e,n,o,l,s){const c=(0,i.E1)("HelloWorld");return(0,i.Wz)(),(0,i.Az)(c,{msg:"Welcome to Your Vue.js App"})}var s=n(9096);const c=t=>((0,i.ED)("data-v-0761ca62"),t=t(),(0,i.ii)(),t),r={id:"container",style:{display:"flex",gap:"10px"}},a={id:"notelist",style:{height:"100%",flex:"1",display:"flex","flex-direction":"column-reverse"}},d=["onClick","id"],p=c((()=>(0,i.QD)("div",{id:"note"},[(0,i.QD)("div",{id:"note_text"},"Do")],-1))),_=[p],y=c((()=>(0,i.QD)("div",{id:"",style:{height:"100%",flex:"1"}},[(0,i.QD)("div",{id:""})],-1))),u={id:"",style:{top:"80%",width:"100%",position:"absolute","margin-bottom":"0",display:"flex",gap:"10px","justify-content":"center","align-items":"center"}},h={class:"checkbox-container",style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center","user-select":"none"}},f={style:{height:"20px"}},m=c((()=>(0,i.QD)("label",{for:"loop_option_btn",style:{height:"20px","line-height":"20px"}},"循环播放",-1))),g={style:{height:"20px"}},x=c((()=>(0,i.QD)("label",{for:"beats_option_btn",style:{height:"20px","line-height":"20px"}},"节拍器",-1))),b={style:{height:"20px"}},v=c((()=>(0,i.QD)("label",{for:"stop_at_random_option_btn",style:{height:"20px","line-height":"20px"}},"在随机音符后暂停",-1)));function k(t,e,n,o,l,c){return(0,i.Wz)(),(0,i.An)("div",{id:"rotate_pad",class:(0,s.WN)({rotate_90:l.isRotated}),style:{display:"flex","flex-direction":"column"}},[(0,i.QD)("div",r,[(0,i.QD)("div",a,[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(l.notes,((t,e)=>((0,i.Wz)(),(0,i.An)("div",{key:e,style:{height:"12.5%",display:"flex","align-items":"center","justify-content":"center"}},[(0,i.QD)("span",{onClick:t=>l.play_effect(e),class:"left-notes",id:"leftnote"+e,style:(0,s.MN)({color:l.colors[e],fontSize:"200%","user-select":"none"})},(0,s.WA)(t),13,d)])))),128))]),(0,i.QD)("div",{id:"notepad",onClick:e[0]||(e[0]=(...t)=>c.start_play&&c.start_play(...t)),style:{height:"100%",flex:"8"}},_),y]),(0,i.QD)("div",u,[(0,i.QD)("button",{class:"niceButton2",id:"start_play_btn",onClick:e[1]||(e[1]=(...t)=>c.start_play&&c.start_play(...t)),style:{"margin-top":"0",height:"50px","align-items":"center","justify-content":"center"}},"播放"),(0,i.QD)("button",{class:"niceButton2",id:"replay_note_btn",onClick:e[2]||(e[2]=(...t)=>c.replay_note&&c.replay_note(...t)),style:{"margin-top":"0",height:"50px"}},"重播音符"),(0,i.QD)("div",null,[(0,i.QD)("div",h,[(0,i.QD)("div",f,[(0,i.QD)("input",{type:"checkbox",id:"loop_option_btn",onClick:e[3]||(e[3]=(...t)=>c.loop_option_clicked&&c.loop_option_clicked(...t)),checked:""}),m]),(0,i.QD)("div",g,[(0,i.QD)("input",{type:"checkbox",id:"beats_option_btn",onClick:e[4]||(e[4]=(...t)=>c.beats_option_btn_clicked&&c.beats_option_btn_clicked(...t)),checked:""}),x]),(0,i.QD)("div",b,[(0,i.QD)("input",{type:"checkbox",id:"stop_at_random_option_btn",onClick:e[5]||(e[5]=(...t)=>c.stop_at_random_option_btn_clicked&&c.stop_at_random_option_btn_clicked(...t))}),v])])])])],2)}n(3248);var w=n(3752);const D=["Do","Re","Mi","Fa","Sol","La","Si","Do"],E=["C3","D3","E3","F3","G3","A3","B3","C4"],Q=["rgb(0,0,0)","rgb(146,0,13)","rgb(248,15,28)","rgb(255,131,33)","rgb(20,188,79)","rgb(0,164,255)","rgb(174,69,179)","rgb(146,208,80)"];let H=[];class z{constructor(){this.current_action_index=0,this.last_random_note_index=0,this.last_note_index=0,this.running=!1}replay_note(){O(this.last_note_index)}init_action_chain(){this.current_action_index=0,H=[];const t=document.getElementById("note"),e=document.getElementById("notepad");for(let s=0;s<D.length;s++){let n=e.clientWidth*(s/D.length),o=e.clientHeight*(1-s/D.length)-t.clientHeight;H.push({type:"display-note",note_index:s,x:n,y:o,style:{color:Q[s]}}),H.push({type:"sleep",time:300})}H.push({type:"sleep",time:100});let n=(e.clientWidth-t.clientWidth)/2,o=(e.clientHeight-t.clientHeight)/2;const i=document.getElementById("note_text");let l=i.style.fontSize;H=H.concat([{type:"set-notetext-style",style:{fontSize:"300%"}},{type:"display-note",note_index:0,x:n,y:o,style:{color:Q[0]}},{type:"sleep",time:1e3},{type:"set-notepad-background-color",color:"black"},{type:"sleep",time:400},{type:"set-notepad-background-color",color:"white"},{type:"display-note",note_index:0,x:n,y:o,style:{color:Q[0]}},{type:"sleep",time:1e3},{type:"set-notepad-background-color",color:"black"},{type:"display-random-note",note_index:0,x:n,y:o,style:{color:"white"}},{type:"sleep",time:2e3},{type:"set-notepad-background-color",color:"white"},{type:"redisplay-random-note",x:n,y:o},{type:"sleep",time:2e3},{type:"set-notetext-style",style:{fontSize:l}}])}async do_action(t){if("sleep"==t.type)await N(t.time);else if("display-note"==t.type){let e=t.x,n=t.y;O(t.note_index),A(D[t.note_index],e,n,t.style),this.last_note_index=t.note_index}else if("display-random-note"==t.type){let e=t.x,n=t.y;this.last_random_note_index=Math.floor(Math.random()*D.length),O(this.last_random_note_index),P("?"),R(e,n),$(t.style),this.last_note_index=this.last_random_note_index}else if("redisplay-random-note"==t.type){let e=t.x,n=t.y;O(this.last_random_note_index),P(D[this.last_random_note_index]),R(e,n),$({color:Q[this.last_random_note_index]})}else"set-notepad-background-color"==t.type?F(t.color):"set-notetext-style"==t.type&&$(t.style)}async step(){await this.do_action(H[this.current_action_index])}stop(){I=!1}jump_to_next_non_sleep_action(){let t=this.current_action_index;for(;t<H.length;t++)if("sleep"!=H[t].type)break;this.current_action_index=t}async run(){this.running=!0;let t=0;while(t<100){if(!I){this.jump_to_next_non_sleep_action();break}if(t++,await this.step(),this.current_action_index++,T&&"display-random-note"==H[this.current_action_index-1].type){const t=document.getElementById("start_play_btn");t.click(),this.jump_to_next_non_sleep_action();break}if(this.current_action_index==H.length&&(this.current_action_index=0,!M)){const t=document.getElementById("start_play_btn");t.click();break}100==t&&(t=0)}this.running=!1}}let B=new z,I=!1,M=!0,T=!1,W=!0;var j={name:"HelloWorld",props:{msg:String},data(){return{notes:D,colors:Q,play_effect:O,isRotated:!1}},mounted(){let t=.05;var e=new w.Howl({src:["music/beat1.MP3"],volume:t}),n=new w.Howl({src:["music/beat2.MP3"],volume:t});setInterval((async()=>{I&&W&&(e.play(),await N(600),n.play())}),600),this.handleResize(),this.$nextTick((()=>{window.addEventListener("resize",this.handleResize)}))},methods:{handleResize(){console.log(123123);const t=document.getElementById("note"),e=document.getElementById("notepad"),n=document.getElementById("note_text"),o=document.getElementById("leftnote1");t.style.fontSize=150*o.style.fontSize+"%",t.style.height=`${o.parentElement.clientHeight}px`,t.style.width=`${o.parentElement.clientWidth}px`,t.style.marginTop=e.clientHeight-t.clientHeight+"px",e.style.background="white";var i=window.getComputedStyle(o);console.log(n),console.log(i.fontSize),n.style.fontSize=i.fontSize,B.init_action_chain()},loop_option_clicked(){M=!M},beats_option_btn_clicked(){W=!W},stop_at_random_option_btn_clicked(){T=!T},replay_note(){B.replay_note()},rotate(){this.isRotated=!this.isRotated,B.init_action_chain()},async start_play(){const t=document.getElementById("start_play_btn");I?(I=!1,t.innerHTML="播放▶️",t.innerHTML="<div>►</div>",t.innerHTML="▶",B.stop(),console.log("播放")):(I=!0,t.innerHTML="暂停⏸️",t.innerHTML="<div>❚❚</div>",t.innerHTML="❚❚",B.running||await B.run(),console.log("暂停"))}}};let C=[];for(let U=0;U<D.length;U++){var S="music/"+E[U]+".MP3",L=new w.Howl({src:[S],volume:1});C.push(L)}function O(t){C[t].play()}function A(t,e,n,o){const i=document.getElementById("note");i.style.marginLeft=`${e}px`,i.style.marginTop=`${n}px`;const l=i.childNodes[0];for(let s in o)l.style[s]=o[s];l.innerHTML=t}function R(t,e){const n=document.getElementById("note");n.style.marginLeft=`${t}px`,n.style.marginTop=`${e}px`}function $(t){const e=document.getElementById("note_text");for(let n in t)e.style[n]=t[n]}function P(t){const e=document.getElementById("note_text");e.innerHTML=t}function F(t){const e=document.getElementById("notepad");e.style.background=t}function N(t){return new Promise((e=>setTimeout(e,t)))}var G=n(4100);const V=(0,G.c)(j,[["render",k],["__scopeId","data-v-0761ca62"]]);var Y=V,q={name:"App",components:{HelloWorld:Y}};const J=(0,G.c)(q,[["render",l]]);var K=J;(0,o.W0)(K).mount("#app")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var l=e[o]={exports:{}};return t[o].call(l.exports,l,l.exports,n),l.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,l){if(!o){var s=1/0;for(d=0;d<t.length;d++){o=t[d][0],i=t[d][1],l=t[d][2];for(var c=!0,r=0;r<o.length;r++)(!1&l||s>=l)&&Object.keys(n.O).every((function(t){return n.O[t](o[r])}))?o.splice(r--,1):(c=!1,l<s&&(s=l));if(c){t.splice(d--,1);var a=i();void 0!==a&&(e=a)}}return e}l=l||0;for(var d=t.length;d>0&&t[d-1][2]>l;d--)t[d]=t[d-1];t[d]=[o,i,l]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,l,s=o[0],c=o[1],r=o[2],a=0;if(s.some((function(e){return 0!==t[e]}))){for(i in c)n.o(c,i)&&(n.m[i]=c[i]);if(r)var d=r(n)}for(e&&e(o);a<s.length;a++)l=s[a],n.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return n.O(d)},o=self["webpackChunkyinzhunlianxi"]=self["webpackChunkyinzhunlianxi"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[999],(function(){return n(6568)}));o=n.O(o)})();
//# sourceMappingURL=app.187f6622.js.map